第2章

一些基础

2.1 CPU简介

CPU是执行程序包含的机器代码的设备。

一些术语：
指令(Instruction)：一条原始的CPU命令。最简单的例子包括：在寄存器之间传输数据，操作内存，原始的算术操作。通常，每个CPU都有自己的指令级架构(ISA).
机器代码(Machine code)：CPU直接处理的代码。每个指令通常用几个字节编码。
汇编语言(Assembly language)：助记码和一些像macros的扩展是为了让程序员的生活更轻松。
CPU寄存器(CPU register)：每个CPU都有一套固定的通用寄存器(GPR)。x86有8个，x86-64有16个，ARM有16个。理解寄存器最简单的方式是把它当作一个没有类型的临时变量。想象如果你使用高级编程语言(PL)[1]并且只能使用八个32位(或64位)的变量。仅用这些就可以做很多事情。

有人可能会好奇为什么机器代码和编程语言之间需要区别。答案在于这样一个事实，人类和CPU不像——人类使用像C/C++，Java，Python等的高级编程语言很简单，但是CPU更容易使用更底层的抽象。可能可以发明一种能执行高级编程语言代码的CPU，但是复杂度会是今天我们所知的CPU的许多倍。类似的，人类写汇编语言很不方便，因为它是那么低级和难写。将高级编程语言代码转换为汇编的程序就是编译器。

2.1.1 不同ISA简述
x86 ISA的操作码长度一直都是不同的，所以当64位时代到来时，x64扩展并没给这个ISA带来显著影响。事实上，x86 ISA仍然含有许多首次出现在16位8086CPU的指令，这些指令在今天的许多CPU中都能找到。ARM 是一个精简指令集计算机CPU，被设计成固定长度的操作码，这在过去有些优势。最开始，所以ARM指令都是4字节。现在称为"ARM模式"。然后他们认为这和他们最初想的比不够节俭。事实上，大多数现实世界应用程序使用的CPU指令可以用更少的信息编码。他们因此增加了另一个ISA，叫Thumb。Thunb中，每条指令仅用2字节编码。现在被称为"Thumb模式"。但是不是所以的ARM指令可以被编码为仅2字节，所以Thumb的指令集在某种程度上受限了。值得注意的是编译成ARM模式和Thumb模式代码可以在一个程序中共存。...

2.2 数字系统
人类习惯于10进制数字系统的原因可能是几乎所有人都有10个手指。然而10对于科学和数学没有什么重大意义。数字电子的天然的数字系统是二进制：0代表导线无电流，1代表有电流。二进制的10代表十进制的2，二进制的100代表十进制的4，等等。

如何从一个系统转换到另一个呢？

位置计数法被广泛使用。含义是，数字(放置在单个字符中的数字 )的权重由它所处的位置决定。如果2放在最左的位置，那么它是2。如果放在最左位置的前一个位置，那么它是20。
